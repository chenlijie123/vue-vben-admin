var T=Object.defineProperty;var w=Object.getOwnPropertySymbols;var E=Object.prototype.hasOwnProperty,N=Object.prototype.propertyIsEnumerable;var A=(o,n,t)=>n in o?T(o,n,{enumerable:!0,configurable:!0,writable:!0,value:t}):o[n]=t,$=(o,n)=>{for(var t in n||(n={}))E.call(n,t)&&A(o,t,n[t]);if(w)for(var t of w(n))N.call(n,t)&&A(o,t,n[t]);return o};var j=(o,n)=>{var t={};for(var s in o)E.call(o,s)&&n.indexOf(s)<0&&(t[s]=o[s]);if(o!=null&&w)for(var s of w(o))n.indexOf(s)<0&&N.call(o,s)&&(t[s]=o[s]);return t};var y=(o,n,t)=>new Promise((s,F)=>{var m=a=>{try{c(t.next(a))}catch(i){F(i)}},g=a=>{try{c(t.throw(a))}catch(i){F(i)}},c=a=>a.done?s(a.value):Promise.resolve(a.value).then(m,g);c((t=t.apply(o,n)).next())});import U from"./FormRender.503326a6.js";import{aV as X,ah as D,am as Y,aL as Z,eq as O,a as x,v as I,f as P,fJ as oo,ao as eo,a4 as B,au as to,k as no,aw as R,o as k,h as z,n as q,z as V,F as ro,az as so,j as ao,ay as io,aA as mo,aB as lo,aC as fo,ax as co}from"./index.e4c75133.js";/* empty css              *//* empty css              */import{a as po}from"./index.dc2534e2.js";import{F as G}from"./Form.aef92efb.js";import{b as uo,f as H}from"./index.c8facd79.js";import{R as J}from"./index.a75532f7.js";import{C as Fo}from"./index.e1cb3c1d.js";import"./index.75f98e09.js";import"./formItemConfig.3ba6559b.js";import"./componentMap.d2d4ae54.js";import"./index.88e45b7c.js";import"./Checkbox.f055b953.js";import"./index.539ebec8.js";import"./index.6bd158f7.js";import"./index.5e95530e.js";import"./index.421493aa.js";import"./index.57809736.js";import"./index.4f4162f7.js";import"./index.071f865c.js";import"./useFormItem.e7937f05.js";import"./RadioButtonGroup.e357ce64.js";import"./get.30beaf8d.js";import"./index.77b20779.js";import"./eagerComputed.9c87a866.js";import"./DeleteOutlined.29d4cb61.js";import"./transButton.70c4c2ad.js";import"./index.330b00fb.js";import"./useFlexGapSupport.3ce44ffd.js";import"./index.130ed745.js";import"./useWindowSizeFn.7fc45049.js";import"./FullscreenOutlined.1953441f.js";import"./index.724a653b.js";import"./useRefs.ec3a6ac6.js";import"./index.88df5d1c.js";import"./index.af75b2ab.js";import"./isNumber.c5f53a02.js";import"./uuid.2b29000c.js";import"./download.986cc0da.js";import"./base64Conver.08b9f4ec.js";import"./index.2aa20a36.js";import"./index.57c1f991.js";import"./_baseIteratee.5a1d74c6.js";import"./useFormDesignState.a5685dac.js";import"./Col.ab78fa67.js";import"./useSize.aaba198d.js";function go(o){return typeof o=="function"?o:X}function W(o,n){return o&&po(o,go(n))}function ho(o,n,t,s){(()=>{const p=Z(),h=p==null?void 0:p.parent;!h||o.formConfig.schemas.forEach(d=>{W(d.componentProps,(v,e)=>{O(v)&&(d.componentProps[e]=v.bind(h))}),W(d.on,(v,e)=>{O(v)&&(d.componentProps[e]=v.bind(h))})})})();const{emit:m}=t,g=G.useForm,{resetFields:c,validate:a,clearValidate:i,validateField:C}=g(n,[]);return{validate:a,validateField:C,resetFields:c,clearValidate:i,submit:()=>y(this,null,function*(){var h,d;const p=D(Y(n.value));return m==null||m("submit",p),(d=(h=o.formConfig).submit)==null||d.call(h,p),p})}}function Co(o,n,t,s){const F=e=>uo(o.formConfig.schemas,r=>r.field===e),m=(e,r,l)=>{const f=F(e);f&&(f[r]=l)},g=(e,r,l)=>{const f=F(e);f!=null&&f.componentProps&&(["options","treeData"].includes(r)&&c(e,void 0),f.componentProps[r]=l)},c=(e,r)=>{var l;typeof e=="string"?(o.formModel[e]=r,(l=t.value)==null||l.validateField(e,r,[])):Object.keys(e).forEach(u=>{var M;o.formModel[u]=e[u],(M=t.value)==null||M.validateField(u,e[u],[])})},a=(e,r)=>{o.formConfig[e]=r},i=e=>D(o.formModel)[e],C=()=>y(this,null,function*(){return D(o.formModel)}),b=e=>{m(e,"hidden",!0)},p=e=>{typeof e=="string"?g(e,"disabled",!0):a("disabled",e!==!1)},h=e=>{m(e,"hidden",!1)},d={};return(e=>{H(e,r=>{H(e,l=>{var f;d[l.field]||(d[l.field]=new Set),((f=r.link)==null?void 0:f.includes(l.field))&&O(r.update)&&d[l.field].add(r)}),d[r.field].add(r)})})(o.formConfig.schemas),$({linkOn:d,setValue:c,getValue:i,hidden:b,show:h,set:m,get:F,setProps:g,getData:C,disable:p},s)}const vo=x({name:"VFormCreate",components:{FormRender:U,Form:G,Row:J},props:{fApi:{type:Object},formModel:{type:Object,default:()=>({})},formConfig:{type:Object,required:!0}},emits:["submit","change","update:fApi","update:formModel"],setup(o,n){const t=o.formConfig.layout=="vertical"?Fo:J,{emit:s}=n,F=I(null),m=P({get:()=>o.formModel,set:u=>s("update:formModel",u)}),g=P(()=>o.formConfig.schemas&&o.formConfig.schemas.filter(u=>u.hidden!==!0)),c=oo(o,"fApi",s),{submit:a,validate:i,clearValidate:C,resetFields:b,validateField:p}=ho(o,m,n),f=Co({formConfig:o.formConfig,formData:o.formModel},n,F,{submit:a,validate:i,validateField:p,resetFields:b,clearValidate:C}),{linkOn:h}=f,d=j(f,["linkOn"]);c.value=d;const v=u=>{var S;const{schema:M,value:K}=u,{field:Q}=no(M);(S=h[Q])==null||S.forEach(_=>{var L;(L=_.update)==null||L.call(_,K,_,c.value)})},e=P(()=>eo(o.formConfig,["disabled","labelWidth","schemas"])),r=()=>{a()};B("formModel",m);const l=(u,M)=>{m.value[u]=M};return B("setFormModelMethod",l),{eFormModel:F,submit:a,validate:i,validateField:p,resetFields:b,clearValidate:C,handleChange:v,formModelProps:e,handleSubmit:r,setFormModel:l,formModelNew:m,wrapperComp:t,noHiddenList:g}}}),Mo={class:"v-form-container"};function bo(o,n,t,s,F,m){const g=R("FormRender"),c=R("Row"),a=R("Form");return k(),z("div",Mo,[q(a,co({class:"v-form-model",ref:"eFormModel",model:o.formModel},o.formModelProps),{default:V(()=>[q(c,null,{default:V(()=>[(k(!0),z(ro,null,so(o.noHiddenList,(i,C)=>(k(),ao(g,{key:C,schema:i,formConfig:o.formConfig,formData:o.formModelNew,onChange:o.handleChange,setFormModel:o.setFormModel,onSubmit:o.handleSubmit,onReset:o.resetFields},io({_:2},[i&&i.componentProps?{name:"schema.componentProps!.slotName",fn:V(()=>[mo(o.$slots,i.componentProps.slotName,lo(fo({formModel:o.formModel,field:i.field,schema:i})),void 0,!0)]),key:"0"}:void 0]),1032,["schema","formConfig","formData","onChange","setFormModel","onSubmit","onReset"]))),128))]),_:3})]),_:3},16,["model"])])}var ge=to(vo,[["render",bo],["__scopeId","data-v-98ac20b4"]]);export{ge as default};
